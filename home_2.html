<html lang="es">
<!-- Establecemos el head de la página -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--  Se establece el titulo -->
    <title>Mega Events</title>
    <!-- se enlaza el archivo de estilos -->
    <link rel="stylesheet" href="assets/css/home.css">
</head>
<nav>
    <ul>
        <li><a href="#home">Inicio</a></li>
        <li><a href="#events">Eventos</a></li>
        <li><a href="#reviews">Opiniones</a></li>
        <li><a href="#about">Nosotros</a></li>
        <li><a href="#about">Contacto</a></li>
    </ul>
</nav>

<section class="hero-image">
    <div class="hero-text">
        <h1 style="font-size:50px">Mega <br/> Events</h1>
        <span class="hero-subtext">Crea tu evento Hoy!!</span>
    </div>
</section>

<section class="events" id="events">
    <div class="slider">
    </div>
</section>

<section id="reviews" class="reviews">
    <h3>¿Que opinan de nosotros?</h3>
</section>

<script>
    // Definimos las imagenes de acuerdo al tipo de evento
    const eventTypeImage = {
        1: "assets/img/music-park.jpeg",
        2: "assets/img/wedding.jpeg",
        3: "assets/img/concert.jpeg"
    };

    // Simulación de base de datos
    const eventsData = [
        {
            "titulo": "Boda los rodriguez",
            "fechaHora": "2024-02-02T08:00:00",
            "type": 2 
        },
        {
            "titulo": "Rock Festival",
            "fechaHora": "2024-02-05T20:00:00",
            "type": 3
        },
        {
            "titulo": "Orquesta al parque",
            "fechaHora": "2024-04-07T10:00:00",
            "type": 1
        },

        {
            "titulo": "Boda los carrasco",
            "fechaHora": "2024-05-07T10:00:00",
            "type": 2
        },

        {
            "titulo": "Arte al parque",
            "fechaHora": "2024-07-07T10:00:00",
            "type": 1
        },
    ];

    // Función para crear los slides desde el JSON
    function createSlides() {
        const slider = document.querySelector('.slider');

        eventsData.forEach(evento => {
            const slide = document.createElement('div');
            slide.classList.add('slide');

            const card = document.createElement('div');
            card.classList.add('card');
            card.style.backgroundImage = `url(${eventTypeImage[evento.type]})`; // Seleccionar la imagen según el tipo

            const title = document.createElement('h2');
            title.classList.add('title');
            title.textContent = evento.titulo;

            const details = document.createElement('div');
            details.classList.add('details');

            // Crear elemento de fecha y hora
            const date = document.createElement('p');
            date.classList.add('date');
            const fechaHora = new Date(evento.fechaHora);
            date.textContent = `Fecha: ${fechaHora.toLocaleDateString()} - Hora: ${fechaHora.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;

            const attendButton = document.createElement('button');
            attendButton.classList.add('attend-button');
            attendButton.textContent = 'Asistiré';
            // Agregamos el atributo data con la información del evento
            attendButton.setAttribute('data-title', evento.titulo);
            attendButton.setAttribute('data-date', evento.fechaHora);

            details.appendChild(date);
            card.appendChild(title);
            card.appendChild(details);
            card.appendChild(attendButton);
            slide.appendChild(card);
            slider.appendChild(slide);
        });
    }

    // Llamar a la función para crear los slides
    createSlides();

    // Evento clic en el botón 'Asistiré'
    document.addEventListener('click', function(event) {
        if (event.target.classList.contains('attend-button')) {
            const title = event.target.getAttribute('data-title');

            // Obtener la fecha y hora del atributo data
            const dateTime = event.target.getAttribute('data-date');
            
            // Convertir la fecha y hora al formato requerido por Google Calendar
            const [year, month, day, hours, minutes, seconds] = dateTime.split(/[-T:]/);
            const startDateTime = `${year}${month}${day}T${hours}${minutes}00Z`;
            const endDateTime = `${year}${month}${day}T${hours}${minutes}00Z`;

            // Construir la URL de Google Calendar
            const googleCalendarUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&dates=${startDateTime}/${endDateTime}&text=${encodeURIComponent(title)}`;

            // Abrir la URL en una nueva pestaña
            window.open(googleCalendarUrl, '_blank');
        }
    });
</script>


</html>